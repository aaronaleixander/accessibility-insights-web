# Copyright (c) Microsoft Corporation. All rights reserved.
# Licensed under the MIT License.
parameters:
    packedOutputPath: null
    artifactName: null
    validateCodeSigning: false

steps:
    - task: CopyFiles@2
      displayName: 'copy package files to upload'
      inputs:
          SourceFolder: ${{ parameters.packedOutputPath }}
          Contents: |
              latest*.yml
              Accessibility?Insights?for?Android*.*
          TargetFolder: '$(System.ArtifactStagingDirectory)/${{ parameters.artifactName }}'
          CleanTargetFolder: true

    - ${{ if eq(parameters.validateCodeSigning, true) }}:
        - task: securedevelopmentteam.vss-secure-development-tools.build-task-codesignvalidation.CodeSign@1
            displayName: 'code sign validation'
            inputs:
                Path: '$(System.ArtifactStagingDirectory)/${{ parameters.artifactName }}'

    - task: PublishBuildArtifacts@1
      displayName: publish artifact ${{ parameters.artifactName }}
      inputs:
          pathtoPublish: '$(System.ArtifactStagingDirectory)/${{ parameters.artifactName }}'
          artifactName: ${{ parameters.artifactName }}
